<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Virgorises — The Square (Public Peer-Review Cafés)</title>
<meta name="description" content="The Square — a hub of public peer-review cafés. Explore working notebooks split into anchored paragraphs, RFC proposals, and community review." />

<link rel="stylesheet" href="XXcafes/zeta-zero-cafe/css/zeta-zero-cafe.css" />
<link rel="stylesheet" href="/css/bundle.css">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

<!-- MathJax (keep, as some teasers may use inline math) -->
<script>
  window.MathJax = {
    tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$','$$'], ['\\[','\\]']], packages: {'[+]':['ams']}, processEnvironments:true, processEscapes:true },
    loader: { load: ['[tex]/ams'] },
    chtml: { linebreaks:{automatic:true,width:'container'} },
    svg:   { fontCache:'global' }
  };
</script>
<script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
  /* tiny hub-specific polish, piggybacks on your existing CSS scale */
  .hero .tag { background: rgba(255,255,255,.08); padding: .25rem .5rem; border-radius: .35rem; font-size:.85rem; }
  .banner { margin:.75rem 0; padding:.65rem .8rem; border:1px solid rgba(255,255,255,.15); border-radius:.6rem; background: rgba(255,255,255,.04); }
  .grid-hub { display:grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap: 1rem; }
  .card .meta { font-size:.8rem; opacity:.8; }
  .note { opacity:.85; font-size:.9rem; }
</style>
</head>
<body>

<header class="hero wrap">
  <span class="tag">The Square — Cafés for Public Peer Review</span>
  <h1>Virgorises</h1>
  <p class="lead">
    Cafés are living, public <em>working notebooks</em> split into anchored paragraphs. Anyone can read; qualified roles can propose <strong>RFCs</strong> (changes), and the crowd can underwrite, dissent, or motivate—with provenance preserved.
  </p>
  <p>
    This page is <strong>The Square</strong>—your map to cafés. Start with Zeta Zero Café or pick another topic as new cafés open.
  </p>

  <div class="banner">
    <strong>How it works:</strong> Read a paragraph → open its RFC panel → underwrite / dissent / motivate → watch the idea sharpen (badges & history visible).
  </div>

  <div class="row" style="margin-top:8px">
    <!-- Point “Explore” to your flagship café -->
    <a class="btn" href="/cafes/zeta-zero-cafe/">📓 Explore Zeta Zero Café</a>
    <!-- “All Cafés” anchors to the directory section below -->
    <a class="btn" href="#cafes">🏁 All Cafés</a>
    <!-- Set to your real Square channel (join/landing) -->
    <a class="btn" href="https://discord.com/channels/1421398181098557462/1421477719157510249" target="_blank" rel="noopener">💬 Discord — The Square</a>
    <!-- OSF remains the archival rail -->
    <a class="btn" href="https://osf.io/" target="_blank" rel="noopener">📁 OSF Archive</a>
  </div>
  <section>
  <h2>Live Café Stats</h2>
  <div id="hub-stats"><div class="note">Stats will appear once <code>out/hub_stats.json</code> is generated.</div></div>
</section>

<section>
  <h2>Latest Proposals</h2>
  <div id="latest-rfcs"><div class="note">Latest proposals will appear once <code>out/latest_rfcs.json</code> is generated.</div></div>
</section>
<!-- Live Café Stats-->
<script defer src="/js/hub.widgets.js"></script>

</header>

<main class="wrap">

  <!-- Directory of cafés (auto from data/cafes.json with graceful fallback) -->
  <section id="cafes">
    <h2>Cafés Directory</h2>
    <div id="cafes-grid" class="grid-hub">
      <!-- Fallback tile (shown only if data/cafes.json is missing or empty) -->
      <article class="card" id="fallback-cafe" style="display:none">
        <div class="kicker">Flagship Café</div>
        <h3>Zeta Zero Café</h3>
        <p class="meta">Working notebook on zeta, primes, geometry—and the connective tissue with physics.</p>
        <p><a href="/cafes/zeta-zero-cafe/">Enter the zeta-zero-cafe →</a></p>
      </article>
    </div>
    <p class="note">New cafés will appear here as they open. Each café keeps its own RFC ledger and anchored paragraph history.</p>
  </section>

  <!-- (Optional) Featured teasers -->
  <section>
    <h2>Why cafés?</h2>
    <div class="card">
      <p><strong>Transparent sharpening.</strong> Paragraph-level anchors + RFC proposals show how ideas evolve—what was challenged, who persuaded whom, and which arguments held.</p>
      <p><strong>Two rails.</strong> OSF is the citable archive; cafés are the living mirror. No moving goalposts.</p>
      <p><strong>Reputation, earned.</strong> Roles like <em>real-part-one-half</em> and <em>non-trivial-zero</em> accrue badges (aligned, early-call, persuader) tied to real outcomes.</p>
    </div>
  </section>

  <section>
    <h2>What to expect</h2>
    <div class="grid-hub">
      <article class="card">
        <h3>Read quietly, or dive in</h3>
        <p>Skim the notebook, follow the anchors, or jump into Discord threads when something hooks you.</p>
      </article>
      <article class="card">
        <h3>Propose & debate changes</h3>
        <p>Submit a Proposal RFC on any paragraph; others can underwrite, dissent, or motivate with detailed reasoning.</p>
      </article>
      <article class="card">
        <h3>History that sticks</h3>
        <p>Each café keeps an append-only ledger of proposals and votes. Results and reputation are portable across cafés.</p>
      </article>
    </div>
  </section>

</main>

<footer class="wrap">
  © <span id="y"></span> Virgorises · <a href="/cafes/zeta-zero-cafe/notebook/">Zeta Zero Café</a> · <a href="https://osf.io/" target="_blank" rel="noopener">OSF</a> · <a href="https://discord.com/channels/1421398181098557462/1421477719157510249" target="_blank" rel="noopener">Discord — The Square</a>
</footer>

<script>
  // year
  document.getElementById('y').textContent = new Date().getFullYear();

  // Render cafés from data/cafes.json (if present)
  (async function renderCafes(){
    const grid = document.getElementById('cafes-grid');
    const fallback = document.getElementById('fallback-cafe');

    try {
      const res = await fetch('/data/cafes.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('cafes.json missing');
      const data = await res.json();

      const cafes = (data && Array.isArray(data.cafes)) ? data.cafes : [];
      if (!cafes.length) { fallback.style.display = ''; return; }

      cafes.forEach(c => {
        const a = document.createElement('article');
        a.className = 'card';
        a.innerHTML = `
          <div class="kicker">${c.title || c.slug}</div>
          <h3>${c.title || c.slug}</h3>
          <p class="meta">${c.description || 'A public peer-review café.'}</p>
          <p>
            <a href="${(c.basePath || '/cafes/'+c.slug) + '/notebook/'}">Enter the notebook →</a>
            ${c.discord?.channel ? ` · <a target="_blank" rel="noopener" href="https://discord.com/channels/${c.discord.guild}/${c.discord.channel}">Discuss</a>` : ''}
          </p>
        `;
        grid.appendChild(a);
      });
    } catch (e) {
      // No cafes.json → show the Zeta Zero Café fallback
      fallback.style.display = '';
    }
  })();
</script>

</body>
</html>
