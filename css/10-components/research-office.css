/* Research Office (scoped to body.ro) */
:root{
  --ro-left-page: 6cm;             /* page width at “zero zoom” */
  --ro-left-stage: 6.6cm;          /* stage a tad wider than page */
  --ro-gap: 20px;
  --ro-stage-h: 60vh;              /* synced from JS to match true stage height */
}

body.ro{
  --bg:#0f141a; --card:#121a23; --ink:#e6eef9; --muted:#9fb2c9; --line:#2b3a48;
  color:var(--ink); background:var(--bg);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;
  margin:0;
}

.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
.muted{color:var(--muted)} .tiny{font-size:12px}
.tag{padding:2px 6px;border:1px solid var(--line);border-radius:999px;font-size:11px}

.ro-head{display:flex;align-items:baseline;gap:12px;padding:14px 16px 8px;border-bottom:1px solid var(--line)}
.ro-head h1{margin:0;font-size:22px}
.ro-back{color:var(--muted);text-decoration:none}.ro-back:hover{color:var(--ink)}

.ro-main{
  display:grid; grid-template-columns: var(--ro-left-stage) 1fr;
  gap:var(--ro-gap); padding:16px;
  align-items:start;
}

/* -------- LEFT -------- */
.left .toolbar{display:flex;flex-wrap:wrap;gap:10px 14px;align-items:center;margin-bottom:8px}
.left .toolbar .btns{display:inline-flex;gap:6px;align-items:center}
.left .toolbar button,.btnrow button{
  background:#1a2430;color:var(--ink);
  border:1px solid var(--line);border-radius:6px;padding:4px 8px;cursor:pointer
}
.left .toolbar button:hover,.btnrow button:hover{background:#223042}

#ro-stage.card{
  position:relative; width:var(--ro-left-stage);
  /* keep the page comfortably visible for A4 & Letter; scrolling if taller */
  height: clamp(360px, calc(100vh - 320px), 1000px);
  overflow:auto; background:#0c1217; border:1px solid var(--line); border-radius:10px;
}

#ro-inner{position:relative; transform-origin:top left; isolation:isolate}
#ro-page{display:block; width:var(--ro-left-page); height:auto; z-index:1}
#ro-svg{position:absolute; left:0; top:0; z-index:2; pointer-events:auto}
#ro-svg text{font:11px ui-monospace,monospace; fill:#9fb2c9}

#token{margin-top:8px}

/* -------- RIGHT -------- */
.right .card{margin-bottom:16px}
.card{background:var(--card);border:1px solid var(--line);border-radius:10px}
.card-h{padding:10px 12px;border-bottom:1px solid var(--line)}
.card .muted{padding:10px 12px}

.para-preview{padding:12px; max-height: 6cm; overflow:auto; white-space:normal; word-break:break-word}
.right textarea{
  width:100%;min-height:180px;resize:vertical;background:#0f151c;color:var(--ink);
  border:1px solid var(--line);border-radius:8px;padding:8px
}
.toolbar.slim{padding:8px 12px;border-bottom:1px solid var(--line)}
.btnrow{display:flex;flex-wrap:wrap;gap:8px;padding:10px 12px}
.file{display:inline-flex;gap:6px;align-items:center}.file input{display:none}

/* MM thumbnail strip */
.mm-thumbs{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:10px;padding:10px}
.mm-thumb{display:flex;flex-direction:column;gap:6px;text-decoration:none;color:inherit}
.mm-thumb img{width:100%;height:auto;border:1px solid var(--line);border-radius:6px;display:block;background:#0a0f14}
.mm-thumb:hover img{border-color:#3b556d}
.mm-thumb div{text-align:center}
