/* ===== Research Office (scoped) ===== */
body.ro {
  --ro-gap: 20px;
  --ro-base-w: 820px;
  --ro-stage-bg: #0b0f15;
  --ro-card-bg: #0f141c;
  --ro-fg: #dfe6ef;
  --ro-muted: #9aa7b5;
  --ro-accent: #6aa3ff;
  color: var(--ro-fg);
  background: #0a0d12;
  font: 14px/1.5 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  margin: 0;
}

.ro-head {
  display:flex; align-items:center; gap:12px;
  padding:16px 20px;
}
.ro-back { color: var(--ro-accent); text-decoration:none; }
.mono   { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
.muted  { color: var(--ro-muted); }
.tiny   { font-size: 12px; }

.ro-main {
  display:grid; grid-template-columns: 1fr 1fr; gap: var(--ro-gap);
  padding: 0 20px 40px;
}
.card {
  background: var(--ro-card-bg);
  border: 1px solid #1b2533;
  border-radius: 10px;
  padding: 14px;
  box-shadow: 0 0 0 1px #0e141d inset;
}
.row { display:flex; align-items:center; justify-content:space-between; gap:10px; }
.tag { background:#1a2230; padding:0 8px; border-radius:10px; }

/* ---- Stage (left) ---- */
#stagewrap { }
#ro-stage  { position:relative; width: max-content; max-width: 100%; overflow:auto; }

#ro-inner {           /* the “one thing that zooms” */
  position: relative;
  transform-origin: top left;
}

/* Page & SVG on top of each other */
#ro-page { display:block; width: var(--ro-base-w); height: auto; }
#ro-svg  { position:absolute; inset:0; width:100%; height:100%; pointer-events:auto; }

/* Toolbar */
.ro-toolbar { margin-top: 10px; }
.toolrow { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.btn {
  background:#17202c; color:#dfe6ef; border:1px solid #233044;
  border-radius: 8px; padding:4px 8px; cursor:pointer;
}
.btn.mini { padding:2px 6px; font-size:12px; }
.btn:active { transform: translateY(1px); }
.sep { width:10px; }

/* HUD token display */
#token { margin-top:4px; }

/* Preview card */
.ro-preview .preview-body {
  max-height: 420px; overflow:auto;
  white-space: normal;     /* ← wrap text */
  word-break: break-word;
}
.ro-preview img { max-width: 100%; height: auto; }

/* Memo output */
.memo-out { margin-top:10px; border-top:1px dashed #243248; padding-top:10px; }
