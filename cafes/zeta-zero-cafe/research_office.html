<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Research Office</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <base id="ro-base" href="/">  <!-- will be set by JS to the chapter directory -->
  
  <!-- Styles -->
  <link rel="stylesheet" href="/css/10-components/research-office.css" />

  <!-- MathJax v3 (SVG) for TeX in previews -->
  <script>
    // Allow $...$ and \( ... \) inline; $$...$$ and \[ ... ] display.
    // Don't skip our preview container.
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      options: { skipHtmlTags: ['script','noscript','style','textarea','code'] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>

<body>
  <div class="wrap">
    <div class="head">
      <h1 class="ro-title" style="margin:0;">
        Research Office — <span id="cafeName" class="tag"></span>
        <span id="chapName" class="muted ro-sub" style="margin-left:.5rem"></span>
      </h1>
      <a id="backLink" class="btn" href="#">← Back</a>
    </div>

    <div class="row">
      <!-- Left: paragraph preview + pick lists -->
      <div class="card">
        <div class="head">
          <strong>Paragraph preview</strong>
          <span id="paraNum" class="tag">#</span>
        </div>
        <pre id="paraPreview" class="card preview"></pre>

        <div class="split" style="margin-top:12px">
          <div>
            <div class="head"><strong>Figures</strong></div>
            <div id="figList" class="list"></div>
          </div>
          <div>
            <div class="head"><strong>Tables</strong></div>
            <div id="tblList" class="list"></div>
          </div>
        </div>

        <div class="bar">
          <button id="copyLink" class="btn">Copy link</button>
        </div>
        <div class="muted" style="margin-top:8px">
          Tip: toggle “member” in any chapter popover to show/hide the app button.
        </div>
      </div>

      <!-- Right: memo editor -->
      <div class="card">
        <div class="head"><strong>Memo to self (Markdown/LaTeX)</strong></div>
        <textarea id="memoBody" placeholder="State the issue, desired change, and rationale..."></textarea>
        <div class="bar">
          <button id="saveDraft" class="btn">Save draft (browser)</button>
          <button id="exportJson" class="btn">Export JSON</button>
          <button id="submitDiscord" class="btn">Submit via Discord</button>
        </div>
        <div class="muted" style="margin-top:8px">
          RFCs are processes, not chats. Draft → step away → revise → then submit.
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="head"><strong>Recent drafts (this browser)</strong></div>
      <div id="memoList" class="list"></div>
    </div>
  </div>

  <!-- App logic -->
  <!-- (Keep the cache-buster fresh if you update /js/research.office.js) -->
  <script defer src="/js/research.office.js?v=2025-10-07e"></script>
</body>
</html>
